awk 'BEGIN{FS=" "; caption1="";caption2="";caption3="";caption4="";caption5=""; len1=0;len2=0,len3=0;len4=0;len5=0;short=""}{if(NF<18) {short=$0} if(NR%5==1){ len1=NF; if(NF<18){caption1=$0;len1=5;} else if(short!=""){caption1=short;len1=5;}} if(NR%5==2){ len2=NF;if(NF<18){caption2=$0;len2=5;} else if(short!=""){caption2=short;len2=5;}} if(NR%5==3) { len3=NF;if(NF<18){caption3=$0;len3=5;} else if(short!=""){caption3=short;len3=5}} if(NR%5==4) {len4=NF;if(NF<18){caption4=$0;len4=5;} else if(short!="") {caption4=short;len4=5;}} if($NR%5==0){len5=NF;if(NF<18){caption5=$0;len5=5} else if(short!=""){len5=5;caption5=short; if(len1>=18){caption1=short} if(len2>=18){caption2=short} if(len3>=18){caption3=short} if(len4>=18){ caption4=short}}}' $1
